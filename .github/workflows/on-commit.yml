name: Run Checks
on: commit

jobs:
  job1_commit:
    name: Main
    runs-on: ubuntu-latest
    steps:
      # This step checks out a copy of your repository.
      - uses: actions/checkout@v2
        # This step references the directory that contains the action.
        # - uses: ./.github/actions/publish-docs.sh
      - uses: actions/setup-python@v1
        name: Set up Python
        with:
          python-version: "3.8.2"
      - uses: dschep/install-poetry-action@v1.3
      - name: Poetry - Install Dependencies
        run: poetry install
      - name: Creates tmp-docs directory
        run: mkdir tmp-docs
      - name: Build docs
        run: pdoc --config show_inherited_members=True --html --output-dir tmp-docs pom_elements --force
      - name: Deploy ðŸš€
        uses: JamesIves/github-pages-deploy-action@releases/v3
        with:
          ACCESS_TOKEN: ${{ secrets.DEPLOY_TOKEN }}
          BRANCH: gh-pages # The branch the action should deploy to.
          FOLDER: tmp-docs/ # The folder the action should deploy.
    # steps:
    #   - uses: actions/checkout@master
    #   - uses: actions/setup-python@v1
    #   - uses: dschep/install-poetry-action@v1.3
    #   - name: Poetry
    #     run: poetry install
    #   - name: Type-check
    #     run: poetry run mypy
    #   - name: Black
    #     run: poetry run black --target-version py38 . --check
    #   - name: Flake8
    #     run: poetry run flake8
